
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/gallery_examples/01_tips_n_tricks/example_02_run_python_script_scope.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_gallery_examples_01_tips_n_tricks_example_02_run_python_script_scope.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_gallery_examples_01_tips_n_tricks_example_02_run_python_script_scope.py:

.. _ref_example_02_run_python_script_scope:

Test variable and function scope
--------------------------------

This example calls the ``run_python_script`` method and checks the variable and
function scope between calls.

.. GENERATED FROM PYTHON SOURCE LINES 12-17

Launch Mechanical
~~~~~~~~~~~~~~~~~
Launch a new Mechanical session in batch, setting ``cleanup_on_exit`` to
``False``. To close this Mechanical session when finished, this example
must call  the ``mechanical.exit()`` method.

.. GENERATED FROM PYTHON SOURCE LINES 17-23

.. code-block:: default


    from ansys.mechanical.core import launch_mechanical

    mechanical = launch_mechanical(batch=True, cleanup_on_exit=False)
    print(mechanical)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Ansys Mechanical [Ansys Mechanical Enterprise]
    Product Version:231
    Software build date:Sat Nov 26 20:15:28 2022




.. GENERATED FROM PYTHON SOURCE LINES 24-27

Set variable
~~~~~~~~~~~~
Run the script to assign a value to a variable.

.. GENERATED FROM PYTHON SOURCE LINES 27-36

.. code-block:: default


    output = mechanical.run_python_script(
        """
    x = 10
    x
    """
    )
    print(f"x = {output}")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    x = 10




.. GENERATED FROM PYTHON SOURCE LINES 37-40

Access the variable in the next call
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Run the script to change the variable value.

.. GENERATED FROM PYTHON SOURCE LINES 40-49

.. code-block:: default


    output = mechanical.run_python_script(
        """
    x = x * 2
    x
    """
    )
    print(f"x = {output}")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    x = 20




.. GENERATED FROM PYTHON SOURCE LINES 50-54

Define function
~~~~~~~~~~~~~~~
Run the script to define a function and access the variable defined in the
previous call.

.. GENERATED FROM PYTHON SOURCE LINES 54-65

.. code-block:: default


    output = mechanical.run_python_script(
        """
    def multiply_by_10():
        return x*10

    multiply_by_10()
    """
    )
    print(f"output = {output}")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    output = 200




.. GENERATED FROM PYTHON SOURCE LINES 66-69

Access the function
~~~~~~~~~~~~~~~~~~~
Run the script to access the function defined in the previous call.

.. GENERATED FROM PYTHON SOURCE LINES 69-78

.. code-block:: default


    output = mechanical.run_python_script(
        """
    multiply_by_10() * 2
    """
    )
    print(f"output = {output}")






.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    output = 400




.. GENERATED FROM PYTHON SOURCE LINES 79-82

Close Mechanical
~~~~~~~~~~~~~~~~
Close the Mechanical instance.

.. GENERATED FROM PYTHON SOURCE LINES 82-84

.. code-block:: default


    mechanical.exit()








.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.214 seconds)


.. _sphx_glr_download_examples_gallery_examples_01_tips_n_tricks_example_02_run_python_script_scope.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: example_02_run_python_script_scope.py <example_02_run_python_script_scope.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: example_02_run_python_script_scope.ipynb <example_02_run_python_script_scope.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_

name: Package cleanup
on:
  workflow_dispatch:
  schedule:
    - cron: '00 22 * * *'

concurrency:
  group: ${{ github.workflow }}
  cancel-in-progress: true

permissions: {}

jobs:
  cleanup:
    name: "Delete untagged package versions"
    runs-on: ubuntu-latest
    permissions:
      contents: write        # Required to access repository metadata
      packages: write        # Needed to delete untagged package versions
    steps:
      - name: "Delete untagged package versions"
        uses: ansys/actions/hk-package-clean-untagged@eb7d0fc873deeee6d4740774675ce1741cb6f154 # v10.2.2
        with:
          package-org: 'ansys'
          package-name: 'mechanical'
          allow-last-days: '7'
          token: ${{ secrets.GITHUB_TOKEN }}